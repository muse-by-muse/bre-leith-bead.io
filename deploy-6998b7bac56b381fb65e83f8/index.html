<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸Œë¦¬ ë ˆíì˜ êµ¬ìŠ¬ ê³„ì‚°ê¸°</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --accent: #f97316;
            --accent-light: #fff7ed;
            --success: #22c55e;
            --bg: #f0f4ff;
            --card: #ffffff;
            --text: #1e293b;
            --muted: #94a3b8;
            --border: #e2e8f0;
            --shadow: 0 4px 24px rgba(59,130,246,0.10);
            --radius: 14px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: var(--bg);
            min-height: 100vh;
            padding: 24px 16px 48px;
            color: var(--text);
        }

        .page-wrapper {
            max-width: 620px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* â”€â”€ í—¤ë” â”€â”€ */
        .page-header {
            text-align: center;
            padding: 8px 0 4px;
        }
        .page-header h1 {
            font-size: 22px;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .page-header h1 img { width: 30px; height: 30px; object-fit: contain; }
        .page-header p { font-size: 11px; color: var(--muted); margin-top: 4px; }

        /* â”€â”€ ì¹´ë“œ ê³µí†µ â”€â”€ */
        .card {
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 24px;
        }

        .card-title {
            font-size: 13px;
            font-weight: 700;
            letter-spacing: .06em;
            text-transform: uppercase;
            color: var(--primary);
            margin-bottom: 16px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--bg);
        }

        /* â”€â”€ ì…ë ¥ í¼ â”€â”€ */
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .input-grid .full { grid-column: 1 / -1; }

        .input-group label {
            display: block;
            font-size: 12px;
            font-weight: 700;
            color: #475569;
            margin-bottom: 5px;
        }
        .input-group input {
            width: 100%;
            padding: 10px 12px;
            border: 1.5px solid var(--border);
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: border-color .2s;
            background: var(--bg);
        }
        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            background: #fff;
        }

        /* â”€â”€ ë²„íŠ¼ â”€â”€ */
        .btn-row { display: flex; gap: 10px; margin-top: 16px; }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            font-family: inherit;
            cursor: pointer;
            transition: transform .1s, opacity .15s;
        }
        .btn:active { transform: scale(.97); }
        .btn-primary { background: var(--primary); color: #fff; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-save { background: var(--success); color: #fff; }
        .btn-save:hover { background: #16a34a; }
        .btn-save:disabled { background: var(--muted); cursor: not-allowed; }

        /* â”€â”€ í˜„ì¬ ê³„ì‚° ê²°ê³¼ â”€â”€ */
        #currentResult { display: none; }
        .result-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            padding: 6px 0;
        }
        .result-label { font-size: 13px; color: #64748b; }
        .result-value { font-size: 16px; font-weight: 700; }
        .result-value.big { font-size: 22px; color: var(--accent); }
        .divider { border: 0; border-top: 1.5px solid var(--border); margin: 10px 0; }
        .round-preview {
            background: var(--bg);
            border-radius: 8px;
            padding: 12px 14px;
            font-size: 13px;
            color: #475569;
            line-height: 1.8;
            margin-bottom: 12px;
        }

        /* â”€â”€ íšŒì°¨ ëª©ë¡ â”€â”€ */
        .round-list { display: flex; flex-direction: column; gap: 10px; }
        .round-item {
            background: var(--bg);
            border-radius: 10px;
            padding: 14px 16px;
            display: flex;
            align-items: flex-start;
            gap: 14px;
            position: relative;
            animation: slideIn .25s ease;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-8px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        .round-badge {
            background: var(--primary);
            color: #fff;
            font-size: 11px;
            font-weight: 900;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .round-info { flex: 1; }
        .round-info .round-meta {
            font-size: 12px;
            color: var(--muted);
            margin-bottom: 4px;
        }
        .round-info .round-totals {
            font-size: 13px;
            font-weight: 700;
            color: var(--text);
        }
        .round-info .round-totals span { color: var(--primary); }
        .round-del {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            color: #cbd5e1;
            padding: 0 4px;
            line-height: 1;
            transition: color .15s;
        }
        .round-del:hover { color: #ef4444; }

        .empty-state {
            text-align: center;
            padding: 28px 0;
            color: var(--muted);
            font-size: 13px;
        }
        .empty-state .icon { font-size: 32px; margin-bottom: 8px; }

        /* â”€â”€ ì´ ì •ì‚° â”€â”€ */
        .total-card {
            background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
            color: #fff;
            border-radius: var(--radius);
            box-shadow: 0 8px 32px rgba(37,99,235,.35);
            padding: 24px;
        }
        .total-card .card-title { color: rgba(255,255,255,.7); border-color: rgba(255,255,255,.15); }
        .total-stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        .total-stat {
            background: rgba(255,255,255,.12);
            border-radius: 10px;
            padding: 12px;
            text-align: center;
        }
        .total-stat .ts-label { font-size: 11px; color: rgba(255,255,255,.65); margin-bottom: 4px; }
        .total-stat .ts-value { font-size: 18px; font-weight: 900; }
        .total-divider { border: 0; border-top: 1px solid rgba(255,255,255,.2); margin: 14px 0; }
        .total-per-person {
            text-align: center;
        }
        .total-per-person .label { font-size: 13px; color: rgba(255,255,255,.7); margin-bottom: 4px; }
        .total-per-person .value {
            font-size: 36px;
            font-weight: 900;
            color: #fbbf24;
            letter-spacing: -.5px;
        }
        .total-per-person .unit { font-size: 18px; font-weight: 500; margin-left: 4px; color: rgba(255,255,255,.8); }

        .btn-clear-all {
            display: block;
            width: 100%;
            margin-top: 14px;
            padding: 10px;
            background: rgba(255,255,255,.12);
            border: 1.5px solid rgba(255,255,255,.25);
            border-radius: 8px;
            color: rgba(255,255,255,.8);
            font-size: 13px;
            font-weight: 700;
            font-family: inherit;
            cursor: pointer;
            transition: background .15s;
        }
        .btn-clear-all:hover { background: rgba(255,0,0,.2); }

        .hidden { display: none !important; }
    </style>
</head>
<body>

<div class="page-wrapper">

    <!-- í—¤ë” -->
    <div class="page-header">
        <h1><img src="assets/item-36398.png" alt="êµ¬ìŠ¬"> ë¸Œë¦¬ ë ˆíì˜ êµ¬ìŠ¬ ê³„ì‚°ê¸°</h1>
        <p>by ë¥˜íŠ¸ì„œë²„ ë¯€ì„¸ with Claude Agent</p>
    </div>

    <!-- â‘  ì…ë ¥ ì¹´ë“œ -->
    <div class="card">
        <div class="card-title">ğŸ“¥ ì´ë²ˆ ë¦´ ê²°ê³¼ ì…ë ¥</div>
        <div class="input-grid">
            <div class="input-group">
                <label>1ê´€ í˜íƒ€í¬ / êµ¬ìŠ¬ ë“±ì¥ íšŸìˆ˜</label>
                <input type="number" id="count1" placeholder="ì˜ˆ: 4" min="0">
            </div>
            <div class="input-group">
                <label>2ê´€ ë¸Œë¡ íƒ€ë‚˜ìŠ¤ / êµ¬ìŠ¬ ë“±ì¥ íšŸìˆ˜</label>
                <input type="number" id="count2" placeholder="ì˜ˆ: 5" min="0">
            </div>
            <div class="input-group">
                <label>3ê´€ ë ˆë„¨ì˜ ë¯¸ì´ë¥´ / êµ¬ìŠ¬ ë“±ì¥ íšŸìˆ˜</label>
                <input type="number" id="count3" placeholder="ì˜ˆ: 3" min="0">
            </div>
            <div class="input-group">
                <label>êµ¬ìŠ¬ 1ê°œë‹¹ ê°€ê²© (ìˆ²)</label>
                <input type="number" id="price" placeholder="ì˜ˆ: 45" min="0">
            </div>
            <div class="input-group full">
                <label>íŒŒí‹°ì› ì¸ì›ìˆ˜</label>
                <input type="number" id="partyMembers" placeholder="ì˜ˆ: 4" min="1">
            </div>
        </div>

        <div class="btn-row">
            <button class="btn btn-primary" onclick="calculate()">ğŸ”¢ ê³„ì‚°í•˜ê¸°</button>
            <button class="btn btn-save" id="saveBtn" onclick="saveRound()" disabled>ğŸ’¾ ì´ë²ˆ ë¦´ ê²°ê³¼ ì €ì¥</button>
        </div>
    </div>

    <!-- â‘¡ í˜„ì¬ ê²°ê³¼ -->
    <div class="card" id="currentResult">
        <div class="card-title">ğŸ“Š í˜„ì¬ ê³„ì‚° ê²°ê³¼</div>
        <div class="round-preview" id="roundPreview"></div>
        <div class="result-row">
            <span class="result-label">ì´ êµ¬ìŠ¬ ìˆ˜</span>
            <span class="result-value" id="r_totalCount">-</span>
        </div>
        <div class="result-row">
            <span class="result-label">ì´ í•©ê³„</span>
            <span class="result-value" id="r_totalPrice">-</span>
        </div>
        <hr class="divider">
        <div class="result-row">
            <span class="result-label">1ì¸ë‹¹ ë°°ë‹¹ê¸ˆ</span>
            <span class="result-value big" id="r_perPerson">-</span>
        </div>
    </div>

    <!-- â‘¢ ì €ì¥ëœ íšŒì°¨ ëª©ë¡ -->
    <div class="card">
        <div class="card-title">ğŸ“‹ ì €ì¥ëœ ë¦´ ëª©ë¡</div>
        <div class="round-list" id="roundList">
            <div class="empty-state">
                <div class="icon">ğŸ«§</div>
                ì•„ì§ ì €ì¥ëœ íšŒì°¨ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ê³„ì‚° í›„ [íšŒì°¨ ì €ì¥]ì„ ëˆŒëŸ¬ ì¶”ê°€í•˜ì„¸ìš”.
            </div>
        </div>
    </div>

    <!-- â‘£ ëˆ„ì  ì´ ì •ì‚° -->
    <div class="total-card" id="totalCard">
        <div class="card-title">ğŸ† ëˆ„ì  ì´ ì •ì‚°</div>
        <div class="total-stat-grid">
            <div class="total-stat">
                <div class="ts-label">ì €ì¥ëœ ë¦´</div>
                <div class="ts-value" id="t_rounds">0</div>
            </div>
            <div class="total-stat">
                <div class="ts-label">ì´ êµ¬ìŠ¬ ìˆ˜</div>
                <div class="ts-value" id="t_beads">0</div>
            </div>
            <div class="total-stat">
                <div class="ts-label">ì´ í•©ê³„ (ìˆ²)</div>
                <div class="ts-value" id="t_total">0</div>
            </div>
        </div>
        <hr class="total-divider">
        <div class="total-per-person">
            <div class="label">íŒŒí‹°ì› <span id="t_members">?</span>ëª… ê¸°ì¤€ 1ì¸ë‹¹ ë°°ë‹¹ê¸ˆ</div>
            <div class="value" id="t_perPerson">0<span class="unit">ìˆ²</span></div>
        </div>
        <button class="btn-clear-all" onclick="clearAll()">ğŸ—‘ ëª¨ë“  ë¦´ ì´ˆê¸°í™”</button>
    </div>

</div>

<script>
    // â”€â”€â”€ ìƒíƒœ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let rounds = JSON.parse(localStorage.getItem('breeRoundData') || '[]');
    let currentCalc = null;   // ë°©ê¸ˆ ê³„ì‚°í•œ ê²°ê³¼ (ë¯¸ì €ì¥)

    function save() {
        localStorage.setItem('breeRoundData', JSON.stringify(rounds));
    }

    // â”€â”€â”€ ê³„ì‚° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function calculate() {
        const c1      = Number(document.getElementById('count1').value) || 0;
        const c2      = Number(document.getElementById('count2').value) || 0;
        const c3      = Number(document.getElementById('count3').value) || 0;
        const price   = Number(document.getElementById('price').value)  || 0;
        const members = Number(document.getElementById('partyMembers').value);

        if (members <= 0) { alert('íŒŒí‹°ì› ìˆ˜ëŠ” ìµœì†Œ 1ëª… ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤!'); return; }
        if (price <= 0)   { alert('êµ¬ìŠ¬ ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!'); return; }

        const totalCount = (c1 + c2 + c3) * 2;
        const totalPrice = totalCount * price;
        const perPerson  = members > 0 ? totalPrice / members : 0;

        currentCalc = { c1, c2, c3, price, members, totalCount, totalPrice, perPerson, ts: Date.now() };

        // ê²°ê³¼ í‘œì‹œ
        document.getElementById('currentResult').style.display = 'block';
        document.getElementById('roundPreview').innerHTML =
            `1ê´€(í˜íƒ€í¬) ${c1}íšŒ, 2ê´€(ë¸Œë¡ íƒ€ë‚˜ìŠ¤) ${c2}íšŒ, 3ê´€(ë ˆë„¨ì˜ ë¯¸ì´ë¥´) ${c3}íšŒ<br>` +
            `ì´ ë“±ì¥ íšŸìˆ˜ ${c1+c2+c3}íšŒ Ã— 2 = <b>${totalCount}ê°œ</b>`;
        document.getElementById('r_totalCount').textContent = totalCount.toLocaleString() + 'ê°œ';
        document.getElementById('r_totalPrice').textContent = totalPrice.toLocaleString() + ' ìˆ²';
        document.getElementById('r_perPerson').textContent  = perPerson.toLocaleString() + ' ìˆ²';

        document.getElementById('saveBtn').disabled = false;
    }

    // â”€â”€â”€ ë¦´ ì €ì¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function saveRound() {
        if (!currentCalc) return;
        rounds.push({ ...currentCalc });
        save();
        renderList();
        renderTotal();
        document.getElementById('saveBtn').disabled = true;
        currentCalc = null;

        // ì €ì¥ í”¼ë“œë°±
        const btn = document.getElementById('saveBtn');
        const orig = btn.textContent;
        btn.textContent = 'âœ… ì €ì¥ì™„ë£Œ!';
        setTimeout(() => { btn.textContent = orig; }, 1200);
    }

    // â”€â”€â”€ íšŒì°¨ ì‚­ì œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function deleteRound(idx) {
        if (!confirm(`${idx+1}ë¦´ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
        rounds.splice(idx, 1);
        save();
        renderList();
        renderTotal();
    }

    // â”€â”€â”€ ì „ì²´ ì´ˆê¸°í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function clearAll() {
        if (!rounds.length) return;
        if (!confirm('ëª¨ë“  ë¦´ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
        rounds = [];
        save();
        renderList();
        renderTotal();
    }

    // â”€â”€â”€ ëª©ë¡ ë Œë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderList() {
        const el = document.getElementById('roundList');
        if (!rounds.length) {
            el.innerHTML = `
                <div class="empty-state">
                    <div class="icon">ğŸ«§</div>
                    ì•„ì§ ì €ì¥ëœ ë¦´ì´ ì—†ìŠµë‹ˆë‹¤.<br>ê³„ì‚° í›„ [ë¦´ ì €ì¥]ì„ ëˆŒëŸ¬ ì¶”ê°€í•˜ì„¸ìš”.
                </div>`;
            return;
        }
        el.innerHTML = rounds.map((r, i) => `
            <div class="round-item">
                <div class="round-badge">${i+1}</div>
                <div class="round-info">
                    <div class="round-meta">
                        1ê´€ ${r.c1}íšŒ Â· 2ê´€ ${r.c2}íšŒ Â· 3ê´€ ${r.c3}íšŒ &nbsp;|&nbsp;
                        ê°œë‹¹ ${r.price.toLocaleString()}ìˆ² &nbsp;|&nbsp; ${r.members}ëª…
                    </div>
                    <div class="round-totals">
                        êµ¬ìŠ¬ ${r.totalCount}ê°œ â†’ í•©ê³„ ${r.totalPrice.toLocaleString()}ìˆ²
                        &nbsp;/ 1ì¸ë‹¹ <span>${r.perPerson.toLocaleString()}ìˆ²</span>
                    </div>
                </div>
                <button class="round-del" onclick="deleteRound(${i})" title="ì‚­ì œ">âœ•</button>
            </div>
        `).join('');
    }

    // â”€â”€â”€ ì´ ì •ì‚° ë Œë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function renderTotal() {
        const n = rounds.length;
        const totalBeads  = rounds.reduce((s, r) => s + r.totalCount, 0);
        const totalMoney  = rounds.reduce((s, r) => s + r.totalPrice, 0);
        // íŒŒí‹°ì› ìˆ˜: ê°€ì¥ ìµœê·¼ ë¦´ ê¸°ì¤€
        const members = n > 0 ? rounds[rounds.length-1].members : 0;
        const perPerson = members > 0 ? totalMoney / members : 0;

        document.getElementById('t_rounds').textContent  = n;
        document.getElementById('t_beads').textContent   = totalBeads.toLocaleString();
        document.getElementById('t_total').textContent   = totalMoney.toLocaleString();
        document.getElementById('t_members').textContent = members || '?';
        document.getElementById('t_perPerson').innerHTML =
            perPerson.toLocaleString() + '<span class="unit">ìˆ²</span>';
    }

    // â”€â”€â”€ ì´ˆê¸° ë Œë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    renderList();
    renderTotal();
</script>
</body>
</html>